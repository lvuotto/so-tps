SRCDIR=src
BINDIR=bin
TESTDIR=test
BENCHDIR=benchmark
INFORMEDIR=informe
IMGDIR=$(INFORMEDIR)/imagenes


.PHONY: all clean test benchmark informe

tp:
	make -C $(SRCDIR)

test:
	make -C $(TESTDIR)

benchmark:
	make
	make test
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.2.sh
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.4.sh
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.7.sh
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.8.sh
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.9.sh
	BINDIR=$(BINDIR) TESTDIR=$(TESTDIR) BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/run.10.sh

plot:
	make benchmark
	BENCHDIR=$(BENCHDIR) IMGDIR=$(IMGDIR) $(BENCHDIR)/plotter.sh

informe:
	make -C $(INFORMEDIR)
	xdg-open $(BINDIR)/informe.pdf


all: tp test benchmark

clean:
	rm -f $(BINDIR)/*
